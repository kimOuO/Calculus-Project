# Calculus_oom å‰ç«¯ API éœ€æ±‚æ–‡æ¡£

**åç«¯åŸºç¡€ URL**: `http://localhost:8000/api/v0.1/Calculus_oom/Calculus_metadata`

---

## ç›®å½•

1. [ç³»ç»Ÿæ¦‚è¿°](#1-ç³»ç»Ÿæ¦‚è¿°)
2. [å­¦ç”Ÿç®¡ç†æ¨¡å—](#2-å­¦ç”Ÿç®¡ç†æ¨¡å—)
3. [æˆç»©ç®¡ç†æ¨¡å—](#3-æˆç»©ç®¡ç†æ¨¡å—)
4. [è€ƒè¯•ç®¡ç†æ¨¡å—](#4-è€ƒè¯•ç®¡ç†æ¨¡å—)
5. [æ–‡ä»¶ç®¡ç†æ¨¡å—](#5-æ–‡ä»¶ç®¡ç†æ¨¡å—)
6. [å®Œæ•´å·¥ä½œæµç¨‹](#6-å®Œæ•´å·¥ä½œæµç¨‹)
7. [å‰ç«¯é¡µé¢å»ºè®®](#7-å‰ç«¯é¡µé¢å»ºè®®)

---

## 1. ç³»ç»Ÿæ¦‚è¿°

### 1.1 æ¶æ„è¯´æ˜

- **SQL Database**: å­¦ç”Ÿã€æˆç»©ã€è€ƒè¯•å…ƒæ•°æ®ï¼ˆPostgreSQLï¼‰
- **NoSQL Database**: è€ƒå·å›¾ç‰‡ã€ç›´æ–¹å›¾æ–‡ä»¶ï¼ˆMongoDBï¼‰
- **è‡ªåŠ¨åŒ–ç‰¹æ€§**: çŠ¶æ€è‡ªåŠ¨æ›´æ–°ã€æ–‡ä»¶è‡ªåŠ¨ä¸Šä¼ 

### 1.2 é€šç”¨å“åº”æ ¼å¼

#### æˆåŠŸå“åº”
```json
{
  "detail": "æ“ä½œæè¿°",
  "data": { /* æ•°æ®å¯¹è±¡ */ }
}
```

#### é”™è¯¯å“åº”
```json
{
  "detail": "é”™è¯¯æè¿°",
  "data": null
}
```

### 1.3 HTTP æ–¹æ³•
æ‰€æœ‰ API ç»Ÿä¸€ä½¿ç”¨ **POST** æ–¹æ³•

---

## 2. å­¦ç”Ÿç®¡ç†æ¨¡å—

### 2.1 åˆ›å»ºå­¦ç”Ÿ

#### API ä¿¡æ¯
- **URL**: `POST /Student_MetadataWriter/create`
- **å®Œæ•´è·¯å¾„**: `http://localhost:8000/api/v0.1/Calculus_oom/Calculus_metadata/Student_MetadataWriter/create`

#### è¯·æ±‚å‚æ•°ï¼ˆç”¨æˆ·å¡«å†™ï¼‰
```json
{
  "student_name": "å¼ ä¸‰",
  "student_number": "B11001001",
  "student_semester": "1141"
}
```

| å­—æ®µ | ç±»å‹ | å¿…å¡« | è¯´æ˜ | å‰ç«¯ç»„ä»¶ |
|------|------|------|------|----------|
| student_name | string | âœ… | å­¦ç”Ÿå§“å | Input |
| student_number | string | âœ… | å­¦å· | Input |
| student_semester | string | âœ… | å­¦æœŸ (æ ¼å¼: 1141) | Input/Select |

#### å“åº”æ•°æ®ï¼ˆå‰ç«¯æ˜¾ç¤ºï¼‰
```json
{
  "detail": "Student created successfully",
  "data": {
    "id": 1,
    "student_uuid": "stu_1141_0105_abc12345",
    "student_name": "å¼ ä¸‰",
    "student_number": "B11001001",
    "student_semester": "1141",
    "student_status": "ä¿®ä¸šä¸­",
    "student_created_at": "2026-01-05 10:30:00",
    "student_updated_at": "2026-01-05 10:30:00"
  }
}
```

#### å‰ç«¯æ˜¾ç¤ºéœ€æ±‚
- âœ… æ˜¾ç¤ºåˆ›å»ºæˆåŠŸæ¶ˆæ¯
- âœ… æ˜¾ç¤ºå­¦ç”ŸçŠ¶æ€å¾½ç« ï¼š`ä¿®ä¸šä¸­`ï¼ˆç»¿è‰²ï¼‰
- âœ… è‡ªåŠ¨åˆ·æ–°å­¦ç”Ÿåˆ—è¡¨

#### è‡ªåŠ¨æ‰§è¡Œ
- ğŸ¤– è‡ªåŠ¨ç”Ÿæˆ `student_uuid`
- ğŸ¤– è‡ªåŠ¨åˆ›å»ºå¯¹åº”çš„æˆç»©è®°å½•ï¼ˆåˆå§‹ä¸ºç©ºï¼‰
- ğŸ¤– è‡ªåŠ¨è®¾ç½®çŠ¶æ€ä¸º `ä¿®ä¸šä¸­`

---

### 2.2 æ‰¹é‡ä¸Šä¼ å­¦ç”Ÿï¼ˆExcelï¼‰

#### API ä¿¡æ¯
- **URL**: `POST /Student_MetadataWriter/upload_excel`
- **å®Œæ•´è·¯å¾„**: `http://localhost:8000/api/v0.1/Calculus_oom/Calculus_metadata/Student_MetadataWriter/upload_excel`

#### è¯·æ±‚å‚æ•°ï¼ˆç”¨æˆ·å¡«å†™ï¼‰
```javascript
// FormData æ ¼å¼
const formData = new FormData();
formData.append('file', excelFile);  // .xlsx æ–‡ä»¶
```

#### Excel æ–‡ä»¶æ ¼å¼
| å§“å | å­¦å· | å­¦æœŸ |
|------|------|------|
| å¼ ä¸‰ | B11001001 | 1141 |
| æå›› | B11001002 | 1141 |

#### å“åº”æ•°æ®ï¼ˆå‰ç«¯æ˜¾ç¤ºï¼‰
```json
{
  "detail": "Successfully created 50 students with 2 errors",
  "data": {
    "created_count": 50,
    "error_count": 2,
    "created_students": ["stu_1141_...", "stu_1141_..."],
    "errors": [
      "Row 5: å¿…è¦æ ä½ä¸ºç©º",
      "Row 10: Validation failed"
    ]
  }
}
```

#### å‰ç«¯æ˜¾ç¤ºéœ€æ±‚
- âœ… æ–‡ä»¶ä¸Šä¼ ç»„ä»¶ï¼ˆé™åˆ¶ .xlsx æ ¼å¼ï¼‰
- âœ… ä¸Šä¼ è¿›åº¦æ¡
- âœ… æˆåŠŸ/å¤±è´¥ç»Ÿè®¡
- âœ… é”™è¯¯åˆ—è¡¨å±•ç¤ºï¼ˆå¦‚æœ‰ï¼‰
- âœ… ä¸‹è½½ Excel æ¨¡æ¿æŒ‰é’®

#### å‰ç«¯äº¤äº’
```javascript
// 1. æä¾›æ¨¡æ¿ä¸‹è½½
downloadTemplate() {
  // åˆ›å»ºåŒ…å«æ ‡é¢˜è¡Œçš„ Excel æ¨¡æ¿
  const template = [['å§“å', 'å­¦å·', 'å­¦æœŸ']];
  // ... å¯¼å‡ºä¸º .xlsx
}

// 2. ä¸Šä¼  Excel
async uploadStudents(file) {
  const formData = new FormData();
  formData.append('file', file);
  
  const response = await fetch(url, {
    method: 'POST',
    body: formData
  });
  
  // æ˜¾ç¤ºç»“æœ
  if (response.data.error_count > 0) {
    showErrorModal(response.data.errors);
  }
  showSuccessMessage(`æˆåŠŸåˆ›å»º ${response.data.created_count} ä½å­¦ç”Ÿ`);
}
```

---

### 2.3 æŸ¥è¯¢å­¦ç”Ÿ

#### API ä¿¡æ¯
- **URL**: `POST /Student_MetadataWriter/read`
- **å®Œæ•´è·¯å¾„**: `http://localhost:8000/api/v0.1/Calculus_oom/Calculus_metadata/Student_MetadataWriter/read`

#### è¯·æ±‚å‚æ•°ï¼ˆç”¨æˆ·å¡«å†™ï¼‰

**æŸ¥è¯¢å•ä¸ªå­¦ç”Ÿ**:
```json
{
  "student_uuid": "stu_1141_0105_abc12345"
}
```

**æŸ¥è¯¢åˆ—è¡¨ï¼ˆå¸¦ç­›é€‰ï¼‰**:
```json
{
  "student_semester": "1141",
  "student_status": "ä¿®ä¸šä¸­"
}
```

**æŸ¥è¯¢å…¨éƒ¨**:
```json
{}
```

| å­—æ®µ | ç±»å‹ | å¿…å¡« | è¯´æ˜ | å‰ç«¯ç»„ä»¶ |
|------|------|------|------|----------|
| student_uuid | string | âŒ | å­¦ç”ŸUUIDï¼ˆå•æŸ¥ï¼‰ | - |
| student_semester | string | âŒ | å­¦æœŸç­›é€‰ | Select |
| student_status | string | âŒ | çŠ¶æ€ç­›é€‰ | Select |

#### å“åº”æ•°æ®ï¼ˆå‰ç«¯æ˜¾ç¤ºï¼‰
```json
{
  "detail": "Students retrieved successfully",
  "data": [
    {
      "id": 1,
      "student_uuid": "stu_1141_0105_abc12345",
      "student_name": "å¼ ä¸‰",
      "student_number": "B11001001",
      "student_semester": "1141",
      "student_status": "ä¿®ä¸šä¸­",
      "student_created_at": "2026-01-05 10:30:00",
      "student_updated_at": "2026-01-05 10:30:00"
    }
  ]
}
```

#### å‰ç«¯æ˜¾ç¤ºéœ€æ±‚
- âœ… å­¦ç”Ÿåˆ—è¡¨è¡¨æ ¼ï¼ˆå¯æ’åºã€åˆ†é¡µï¼‰
- âœ… çŠ¶æ€å¾½ç« ï¼š
  - `ä¿®ä¸šä¸­` - è“è‰²
  - `ä¿®ä¸šå®Œæ¯•` - ç»¿è‰²
  - `è¢«å½“` - çº¢è‰²
  - `äºŒé€€` - ç°è‰²
- âœ… ç­›é€‰å™¨ï¼šå­¦æœŸã€çŠ¶æ€
- âœ… æœç´¢æ¡†ï¼šå§“åã€å­¦å·

---

### 2.4 æ›´æ–°å­¦ç”Ÿä¿¡æ¯

#### API ä¿¡æ¯
- **URL**: `POST /Student_MetadataWriter/update`
- **å®Œæ•´è·¯å¾„**: `http://localhost:8000/api/v0.1/Calculus_oom/Calculus_metadata/Student_MetadataWriter/update`

#### è¯·æ±‚å‚æ•°ï¼ˆç”¨æˆ·å¡«å†™ï¼‰
```json
{
  "student_uuid": "stu_1141_0105_abc12345",
  "student_name": "å¼ ä¸‰",
  "student_number": "B11001001",
  "student_semester": "1141"
}
```

#### å‰ç«¯æ˜¾ç¤ºéœ€æ±‚
- âœ… ç¼–è¾‘è¡¨å•ï¼ˆé¢„å¡«ç°æœ‰æ•°æ®ï¼‰
- âœ… ä¿å­˜æŒ‰é’®
- âœ… å–æ¶ˆæŒ‰é’®

---

### 2.5 åˆ é™¤å­¦ç”Ÿ

#### API ä¿¡æ¯
- **URL**: `POST /Student_MetadataWriter/delete`
- **å®Œæ•´è·¯å¾„**: `http://localhost:8000/api/v0.1/Calculus_oom/Calculus_metadata/Student_MetadataWriter/delete`

#### è¯·æ±‚å‚æ•°ï¼ˆç”¨æˆ·å¡«å†™ï¼‰
```json
{
  "student_uuid": "stu_1141_0105_abc12345"
}
```

#### å‰ç«¯æ˜¾ç¤ºéœ€æ±‚
- âœ… åˆ é™¤ç¡®è®¤å¯¹è¯æ¡†
- âš ï¸ è­¦å‘Šæç¤ºï¼šå°†åŒæ—¶åˆ é™¤å…³è”çš„æˆç»©è®°å½•

#### è‡ªåŠ¨æ‰§è¡Œ
- ğŸ¤– è‡ªåŠ¨åˆ é™¤æ‰€æœ‰å…³è”çš„æˆç»©è®°å½•ï¼ˆCascade Deleteï¼‰

---

### 2.6 æ›´æ–°å­¦ç”ŸçŠ¶æ€

#### API ä¿¡æ¯
- **URL**: `POST /Student_MetadataWriter/status`
- **å®Œæ•´è·¯å¾„**: `http://localhost:8000/api/v0.1/Calculus_oom/Calculus_metadata/Student_MetadataWriter/status`

#### è¯·æ±‚å‚æ•°ï¼ˆç”¨æˆ·å¡«å†™ï¼‰
```json
{
  "student_uuid": "stu_1141_0105_abc12345",
  "student_status": "äºŒé€€"
}
```

| å­—æ®µ | ç±»å‹ | å¿…å¡« | å¯é€‰å€¼ | å‰ç«¯ç»„ä»¶ |
|------|------|------|--------|----------|
| student_uuid | string | âœ… | - | - |
| student_status | string | âœ… | ä¿®ä¸šä¸­, äºŒé€€, è¢«å½“, ä¿®ä¸šå®Œæ¯• | Select |

#### å‰ç«¯æ˜¾ç¤ºéœ€æ±‚
- âœ… çŠ¶æ€ä¸‹æ‹‰é€‰æ‹©å™¨
- âš ï¸ **ç‰¹åˆ«æç¤º**ï¼šè®¾ç½®ä¸º `äºŒé€€` å°†æ¸…ç©ºè¯¥å­¦ç”Ÿæ‰€æœ‰æˆç»©

#### è‡ªåŠ¨æ‰§è¡Œ
- ğŸ¤– è‹¥è®¾ç½®ä¸º `äºŒé€€`ï¼Œè‡ªåŠ¨æ¸…ç©ºè¯¥å­¦ç”Ÿæ‰€æœ‰æˆç»©
- ğŸ¤– `ä¿®ä¸šå®Œæ¯•`/`è¢«å½“` é€šå¸¸ç”±ç³»ç»Ÿè‡ªåŠ¨è®¾ç½®ï¼ˆè®¡ç®—æ€»æˆç»©æ—¶ï¼‰

---

### 2.7 å¯¼å‡ºå­¦ç”Ÿæˆç»©ï¼ˆExcelï¼‰

#### API ä¿¡æ¯
- **URL**: `POST /Student_MetadataWriter/feedback_excel`
- **å®Œæ•´è·¯å¾„**: `http://localhost:8000/api/v0.1/Calculus_oom/Calculus_metadata/Student_MetadataWriter/feedback_excel`

#### è¯·æ±‚å‚æ•°ï¼ˆç”¨æˆ·å¡«å†™ï¼‰
```json
{
  "student_semester": "1141"
}
```

#### å“åº”
- **Content-Type**: `application/vnd.openxmlformats-officedocument.spreadsheetml.sheet`
- **æ–‡ä»¶å**: `students_scores_1141.xlsx`

#### å¯¼å‡ºå†…å®¹
| å­¦å· | å§“å | å­¦æœŸ | çŠ¶æ€ | ç¬¬ä¸€æ¬¡å°è€ƒ | æœŸä¸­è€ƒ | ç¬¬äºŒæ¬¡å°è€ƒ | æœŸæœ«è€ƒ | æ€»åˆ† |
|------|------|------|------|-----------|--------|-----------|--------|------|
| B11001001 | å¼ ä¸‰ | 1141 | ä¿®ä¸šå®Œæ¯• | 85 | 90 | 88 | 92 | 89.2 |

#### å‰ç«¯æ˜¾ç¤ºéœ€æ±‚
- âœ… å¯¼å‡ºæŒ‰é’®
- âœ… å­¦æœŸé€‰æ‹©å™¨
- âœ… è‡ªåŠ¨ä¸‹è½½æ–‡ä»¶

---

## 3. æˆç»©ç®¡ç†æ¨¡å—

### 3.1 åˆ›å»º/æ›´æ–°æˆç»©

#### API ä¿¡æ¯
- **URL**: `POST /Score_MetadataWriter/create`
- **å®Œæ•´è·¯å¾„**: `http://localhost:8000/api/v0.1/Calculus_oom/Calculus_metadata/Score_MetadataWriter/create`

#### è¯·æ±‚å‚æ•°ï¼ˆç”¨æˆ·å¡«å†™ï¼‰
```json
{
  "f_student_uuid": "stu_1141_0105_abc12345",
  "update_field": "score_quiz1",
  "score_value": 85
}
```

| å­—æ®µ | ç±»å‹ | å¿…å¡« | å¯é€‰å€¼ | å‰ç«¯ç»„ä»¶ |
|------|------|------|--------|----------|
| f_student_uuid | string | âœ… | - | Hidden |
| update_field | string | âœ… | score_quiz1, score_midterm, score_quiz2, score_finalexam | Select |
| score_value | number | âœ… | 0-100 | Input (number) |

#### å‰ç«¯æ˜¾ç¤ºéœ€æ±‚
- âœ… æˆç»©è¾“å…¥è¡¨æ ¼ï¼ˆå¯ç¼–è¾‘ï¼‰
- âœ… æ•°å€¼éªŒè¯ï¼ˆ0-100ï¼‰
- âœ… è‡ªåŠ¨ä¿å­˜æˆ–ä¿å­˜æŒ‰é’®

---

### 3.2 æ›´æ–°æˆç»©

#### API ä¿¡æ¯
- **URL**: `POST /Score_MetadataWriter/update`
- **å®Œæ•´è·¯å¾„**: `http://localhost:8000/api/v0.1/Calculus_oom/Calculus_metadata/Score_MetadataWriter/update`

#### è¯·æ±‚å‚æ•°ï¼ˆç”¨æˆ·å¡«å†™ï¼‰
```json
{
  "score_uuid": "scr_1141_0105_xyz67890",
  "update_field": "score_quiz1",
  "score_value": 88
}
```

---

### 3.3 æŸ¥è¯¢æˆç»©

#### API ä¿¡æ¯
- **URL**: `POST /Score_MetadataWriter/read`
- **å®Œæ•´è·¯å¾„**: `http://localhost:8000/api/v0.1/Calculus_oom/Calculus_metadata/Score_MetadataWriter/read`

#### è¯·æ±‚å‚æ•°ï¼ˆç”¨æˆ·å¡«å†™ï¼‰
```json
{
  "f_student_uuid": "stu_1141_0105_abc12345"
}
```

#### å“åº”æ•°æ®ï¼ˆå‰ç«¯æ˜¾ç¤ºï¼‰
```json
{
  "detail": "Score retrieved successfully",
  "data": {
    "id": 1,
    "score_uuid": "scr_1141_0105_xyz67890",
    "score_quiz1": "85",
    "score_midterm": "90",
    "score_quiz2": "88",
    "score_finalexam": "92",
    "score_total": "89.2",
    "f_student_uuid": "stu_1141_0105_abc12345",
    "score_created_at": "2026-01-05 10:30:00",
    "score_updated_at": "2026-01-05 15:20:00"
  }
}
```

#### å‰ç«¯æ˜¾ç¤ºéœ€æ±‚
- âœ… æˆç»©è¡¨æ ¼ï¼ˆæ˜¾ç¤ºæ‰€æœ‰è€ƒè¯•ï¼‰
- âœ… æ€»åˆ†é«˜äº®æ˜¾ç¤º
- âœ… ç©ºç™½æˆç»©æ˜¾ç¤ºä¸º "-" æˆ– "æœªå¡«å†™"

---

### 3.4 è®¡ç®—æ€»æˆç»©

#### API ä¿¡æ¯
- **URL**: `POST /Score_MetadataWriter/calculation_final`
- **å®Œæ•´è·¯å¾„**: `http://localhost:8000/api/v0.1/Calculus_oom/Calculus_metadata/Score_MetadataWriter/calculation_final`

#### è¯·æ±‚å‚æ•°ï¼ˆç”¨æˆ·å¡«å†™ï¼‰
```json
{
  "test_semester": "1141",
  "passing_score": 60.0
}
```

| å­—æ®µ | ç±»å‹ | å¿…å¡« | è¯´æ˜ | å‰ç«¯ç»„ä»¶ |
|------|------|------|------|----------|
| test_semester | string | âœ… | å­¦æœŸ | Select |
| passing_score | number | âœ… | åŠæ ¼åˆ†æ•° | Input (é»˜è®¤ 60) |

#### å“åº”æ•°æ®
```json
{
  "detail": "Final scores calculated successfully for 50 students",
  "data": {
    "updated_count": 50
  }
}
```

#### å‰ç«¯æ˜¾ç¤ºéœ€æ±‚
- âœ… è®¡ç®—æŒ‰é’®ï¼ˆå¸¦ç¡®è®¤ï¼‰
- âœ… åŠæ ¼åˆ†æ•°è¾“å…¥æ¡†
- âœ… æˆåŠŸåæ˜¾ç¤ºæ›´æ–°æ•°é‡

#### è‡ªåŠ¨æ‰§è¡Œ ğŸ¤–
- ğŸ¤– è‡ªåŠ¨è®¡ç®—åŠ æƒæ€»åˆ†ï¼ˆæ ¹æ®æƒé‡é…ç½®ï¼‰
- ğŸ¤– è‡ªåŠ¨æ›´æ–°å­¦ç”ŸçŠ¶æ€ï¼š
  - æ€»åˆ† >= åŠæ ¼åˆ†æ•° â†’ `ä¿®ä¸šå®Œæ¯•`
  - æ€»åˆ† < åŠæ ¼åˆ†æ•° â†’ `è¢«å½“`

---

### 3.5 è€ƒè¯•ç»Ÿè®¡

#### API ä¿¡æ¯
- **URL**: `POST /Score_MetadataWriter/test_score`
- **å®Œæ•´è·¯å¾„**: `http://localhost:8000/api/v0.1/Calculus_oom/Calculus_metadata/Score_MetadataWriter/test_score`

#### è¯·æ±‚å‚æ•°ï¼ˆç”¨æˆ·å¡«å†™ï¼‰
```json
{
  "score_semester": "1141",
  "score_field": "score_midterm",
  "exclude_empty": true
}
```

#### å“åº”æ•°æ®ï¼ˆå‰ç«¯æ˜¾ç¤ºï¼‰
```json
{
  "detail": "Test statistics calculated successfully",
  "data": {
    "semester": "1141",
    "score_field": "score_midterm",
    "total_count": 48,
    "average": 78.5,
    "median": 80.0
  }
}
```

#### å‰ç«¯æ˜¾ç¤ºéœ€æ±‚
- âœ… ç»Ÿè®¡å¡ç‰‡ï¼š
  - ğŸ“Š å‚ä¸äººæ•°
  - ğŸ“ˆ å¹³å‡åˆ†
  - ğŸ“Š ä¸­ä½æ•°
- âœ… è€ƒè¯•é€‰æ‹©å™¨
- âœ… æ˜¯å¦æ’é™¤ç©ºç™½æˆç»©çš„å¼€å…³

---

### 3.6 ç”Ÿæˆæˆç»©åˆ†å¸ƒå›¾

#### API ä¿¡æ¯
- **URL**: `POST /Score_MetadataWriter/step_diagram`
- **å®Œæ•´è·¯å¾„**: `http://localhost:8000/api/v0.1/Calculus_oom/Calculus_metadata/Score_MetadataWriter/step_diagram`

#### è¯·æ±‚å‚æ•°ï¼ˆç”¨æˆ·å¡«å†™ï¼‰
```json
{
  "test_semester": "1141",
  "score_field": "score_midterm",
  "bins": {
    "type": "fixed_width",
    "width": 10
  },
  "title": "1141 æœŸä¸­è€ƒ åˆ†æ•°åˆ†å¸ƒ",
  "format": "png"
}
```

| å­—æ®µ | ç±»å‹ | å¿…å¡« | è¯´æ˜ | å‰ç«¯ç»„ä»¶ |
|------|------|------|------|----------|
| test_semester | string | âœ… | å­¦æœŸ | Select |
| score_field | string | âœ… | è€ƒè¯•ç±»å‹ | Select |
| bins.width | number | âŒ | çº§è·å®½åº¦ï¼ˆé»˜è®¤10ï¼‰ | Input |
| title | string | âŒ | å›¾è¡¨æ ‡é¢˜ | Input |
| format | string | âŒ | æ ¼å¼ï¼ˆpng/jpgï¼‰ | Select |

#### å“åº”
- **Content-Type**: `image/png` æˆ– `image/jpeg`
- **è¿”å›å›¾ç‰‡æ–‡ä»¶**

#### å‰ç«¯æ˜¾ç¤ºéœ€æ±‚
- âœ… ç”ŸæˆæŒ‰é’®
- âœ… å›¾ç‰‡é¢„è§ˆ/ä¸‹è½½
- âœ… æ ‡é¢˜è‡ªå®šä¹‰è¾“å…¥

#### è‡ªåŠ¨æ‰§è¡Œ ğŸ¤–
- ğŸ¤– ç”Ÿæˆåè‡ªåŠ¨ä¸Šä¼ åˆ°æ–‡ä»¶ç³»ç»Ÿ
- ğŸ¤– è‡ªåŠ¨å…³è”åˆ°å¯¹åº”è€ƒè¯•
- ğŸ¤– è‡ªåŠ¨æ›´æ–°è€ƒè¯•çŠ¶æ€ä¸º `è€ƒå·æˆç¸¾çµç®—`

---

## 4. è€ƒè¯•ç®¡ç†æ¨¡å—

### 4.1 åˆ›å»ºè€ƒè¯•

#### API ä¿¡æ¯
- **URL**: `POST /Test_MetadataWriter/create`
- **å®Œæ•´è·¯å¾„**: `http://localhost:8000/api/v0.1/Calculus_oom/Calculus_metadata/Test_MetadataWriter/create`

#### è¯·æ±‚å‚æ•°ï¼ˆç”¨æˆ·å¡«å†™ï¼‰
```json
{
  "test_name": "æœŸä¸­è€ƒ",
  "test_date": "114/12/28",
  "test_range": "1-1~2-6",
  "test_semester": "1141"
}
```

| å­—æ®µ | ç±»å‹ | å¿…å¡« | è¯´æ˜ | å‰ç«¯ç»„ä»¶ |
|------|------|------|------|----------|
| test_name | string | âœ… | è€ƒè¯•åç§° | Input |
| test_date | string | âœ… | è€ƒè¯•æ—¥æœŸ | DatePicker |
| test_range | string | âœ… | è€ƒè¯•èŒƒå›´ | Input |
| test_semester | string | âœ… | å­¦æœŸ | Select |

#### å“åº”æ•°æ®ï¼ˆå‰ç«¯æ˜¾ç¤ºï¼‰
```json
{
  "detail": "Test created successfully",
  "data": {
    "id": 1,
    "test_uuid": "tst_1141_q1_abc12345",
    "test_name": "æœŸä¸­è€ƒ",
    "test_date": "114/12/28",
    "test_range": "1-1~2-6",
    "test_semester": "1141",
    "test_weight": "",
    "test_states": "å°šæœªå‡ºè€ƒå·",
    "pt_opt_score_uuid": "",
    "test_created_at": "2026-01-05 10:30:00",
    "test_updated_at": "2026-01-05 10:30:00"
  }
}
```

#### å‰ç«¯æ˜¾ç¤ºéœ€æ±‚
- âœ… è€ƒè¯•çŠ¶æ€å¾½ç« ï¼š
  - `å°šæœªå‡ºè€ƒå·` - ç°è‰²
  - `è€ƒå·å®Œæˆ` - è“è‰²
  - `è€ƒå·æˆç¸¾çµç®—` - ç»¿è‰²

#### è‡ªåŠ¨æ‰§è¡Œ
- ğŸ¤– è‡ªåŠ¨è®¾ç½®åˆå§‹çŠ¶æ€ä¸º `å°šæœªå‡ºè€ƒå·`

---

### 4.2 æŸ¥è¯¢è€ƒè¯•

#### API ä¿¡æ¯
- **URL**: `POST /Test_MetadataWriter/read`
- **å®Œæ•´è·¯å¾„**: `http://localhost:8000/api/v0.1/Calculus_oom/Calculus_metadata/Test_MetadataWriter/read`

#### è¯·æ±‚å‚æ•°
```json
{
  "test_semester": "1141"
}
```

#### å‰ç«¯æ˜¾ç¤ºéœ€æ±‚
- âœ… è€ƒè¯•åˆ—è¡¨å¡ç‰‡
- âœ… æ˜¾ç¤ºè€ƒè¯•åç§°ã€æ—¥æœŸã€èŒƒå›´
- âœ… çŠ¶æ€å¾½ç« 
- âœ… æƒé‡æ˜¾ç¤ºï¼ˆå¦‚å·²è®¾ç½®ï¼‰

---

### 4.3 æ›´æ–°è€ƒè¯•çŠ¶æ€ï¼ˆæ‰‹åŠ¨ï¼‰

#### API ä¿¡æ¯
- **URL**: `POST /Test_MetadataWriter/status`
- **å®Œæ•´è·¯å¾„**: `http://localhost:8000/api/v0.1/Calculus_oom/Calculus_metadata/Test_MetadataWriter/status`

#### è¯·æ±‚å‚æ•°ï¼ˆç”¨æˆ·å¡«å†™ï¼‰
```json
{
  "test_uuid": "tst_1141_mid_abc12345",
  "status": "è€ƒå·å®Œæˆ"
}
```

| å­—æ®µ | ç±»å‹ | å¿…å¡« | å¯é€‰å€¼ |
|------|------|------|--------|
| test_uuid | string | âœ… | - |
| status | string | âœ… | å°šæœªå‡ºè€ƒå·, è€ƒå·å®Œæˆ, è€ƒå·æˆç¸¾çµç®— |

#### å‰ç«¯æ˜¾ç¤ºéœ€æ±‚
- âœ… çŠ¶æ€ä¸‹æ‹‰é€‰æ‹©å™¨
- â„¹ï¸ **æ³¨æ„**ï¼šé€šå¸¸ç”±ç³»ç»Ÿè‡ªåŠ¨æ›´æ–°ï¼Œæ‰‹åŠ¨è°ƒç”¨ç”¨äºè¡¥æ•‘

---

### 4.4 è®¾ç½®æƒé‡

#### API ä¿¡æ¯
- **URL**: `POST /Test_MetadataWriter/setweight`
- **å®Œæ•´è·¯å¾„**: `http://localhost:8000/api/v0.1/Calculus_oom/Calculus_metadata/Test_MetadataWriter/setweight`

#### è¯·æ±‚å‚æ•°ï¼ˆç”¨æˆ·å¡«å†™ï¼‰
```json
{
  "test_semester": "1141",
  "weights": {
    "ç¬¬ä¸€æ¬¡å°è€ƒ": 0.2,
    "æœŸä¸­è€ƒ": 0.3,
    "ç¬¬äºŒæ¬¡å°è€ƒ": 0.2,
    "æœŸæœ«è€ƒ": 0.3
  }
}
```

#### å‰ç«¯æ˜¾ç¤ºéœ€æ±‚
- âœ… æƒé‡é…ç½®è¡¨å•
- âœ… æ€»å’ŒéªŒè¯ï¼ˆå¿…é¡»ç­‰äº 1.0ï¼‰
- âœ… ç™¾åˆ†æ¯”æ˜¾ç¤ºï¼ˆ20%, 30%, ...ï¼‰

#### å‰ç«¯ç»„ä»¶ç¤ºä¾‹
```javascript
const weightConfig = {
  'ç¬¬ä¸€æ¬¡å°è€ƒ': 0.2,
  'æœŸä¸­è€ƒ': 0.3,
  'ç¬¬äºŒæ¬¡å°è€ƒ': 0.2,
  'æœŸæœ«è€ƒ': 0.3
};

// éªŒè¯æ€»å’Œ
const sum = Object.values(weightConfig).reduce((a, b) => a + b, 0);
if (Math.abs(sum - 1.0) > 0.001) {
  alert('æƒé‡æ€»å’Œå¿…é¡»ä¸º 100%');
}
```

---

## 5. æ–‡ä»¶ç®¡ç†æ¨¡å—

### 5.1 ä¸Šä¼ è€ƒå·

#### API ä¿¡æ¯
- **URL**: `POST /test-filedata/create`
- **å®Œæ•´è·¯å¾„**: `http://localhost:8000/api/v0.1/Calculus_oom/Calculus_metadata/test-filedata/create`

#### è¯·æ±‚å‚æ•°ï¼ˆç”¨æˆ·å¡«å†™ï¼‰
```javascript
// FormData æ ¼å¼
const formData = new FormData();
formData.append('test_uuid', 'tst_1141_mid_abc12345');
formData.append('asset_type', 'paper');
formData.append('file', imageFile);  // å›¾ç‰‡æ–‡ä»¶
```

| å­—æ®µ | ç±»å‹ | å¿…å¡« | å¯é€‰å€¼ |
|------|------|------|--------|
| test_uuid | string | âœ… | - |
| asset_type | string | âœ… | paper, test_pic, histogram, test_pic_histogram |
| file | File | âœ… | å›¾ç‰‡æ–‡ä»¶ |

#### å“åº”æ•°æ®
```json
{
  "detail": "Files uploaded successfully",
  "data": {
    "file_uuid": "tpic_1141_mid_abc12345",
    "asset_type": "paper",
    "file_count": 1,
    "mongodb_id": "...",
    "test_states": "è€ƒå·å®Œæˆ"
  }
}
```

#### å‰ç«¯æ˜¾ç¤ºéœ€æ±‚
- âœ… æ–‡ä»¶ä¸Šä¼ ç»„ä»¶ï¼ˆæ”¯æŒæ‹–æ”¾ï¼‰
- âœ… å›¾ç‰‡é¢„è§ˆ
- âœ… ä¸Šä¼ è¿›åº¦æ¡
- âœ… æ”¯æŒçš„æ ¼å¼ï¼šJPG, PNG

#### è‡ªåŠ¨æ‰§è¡Œ ğŸ¤–
- ğŸ¤– ä¸Šä¼  `paper` æ—¶ï¼Œè‡ªåŠ¨æ›´æ–°çŠ¶æ€ï¼š`å°šæœªå‡ºè€ƒå·` â†’ `è€ƒå·å®Œæˆ`
- ğŸ¤– ä¸Šä¼  `histogram` æ—¶ï¼Œè‡ªåŠ¨æ›´æ–°çŠ¶æ€ï¼š`è€ƒå·å®Œæˆ` â†’ `è€ƒå·æˆç¸¾çµç®—`

---

### 5.2 æŸ¥çœ‹è€ƒå·

#### API ä¿¡æ¯
- **URL**: `POST /test-filedata/read`
- **å®Œæ•´è·¯å¾„**: `http://localhost:8000/api/v0.1/Calculus_oom/Calculus_metadata/test-filedata/read`

#### è¯·æ±‚å‚æ•°
```json
{
  "test_pic_uuid": "tpic_1141_mid_abc12345",
  "asset_type": "paper"
}
```

#### å“åº”
- **Content-Type**: `image/jpeg` æˆ– `image/png`
- **è¿”å›å›¾ç‰‡æ–‡ä»¶**

#### å‰ç«¯æ˜¾ç¤ºéœ€æ±‚
- âœ… å›¾ç‰‡æŸ¥çœ‹å™¨/ç¯ç®±
- âœ… ç¼©æ”¾ã€æ—‹è½¬åŠŸèƒ½
- âœ… ä¸‹è½½æŒ‰é’®

---

### 5.3 æ›´æ–°è€ƒå·

#### API ä¿¡æ¯
- **URL**: `POST /test-filedata/update`
- **å®Œæ•´è·¯å¾„**: `http://localhost:8000/api/v0.1/Calculus_oom/Calculus_metadata/test-filedata/update`

#### è¯·æ±‚å‚æ•°
```javascript
const formData = new FormData();
formData.append('uid', 'tpic_1141_mid_abc12345');
formData.append('asset_type', 'paper');
formData.append('file', newImageFile);
```

---

### 5.4 åˆ é™¤è€ƒå·

#### API ä¿¡æ¯
- **URL**: `POST /test-filedata/delete`
- **å®Œæ•´è·¯å¾„**: `http://localhost:8000/api/v0.1/Calculus_oom/Calculus_metadata/test-filedata/delete`

#### è¯·æ±‚å‚æ•°
```json
{
  "test_pic_uuid": "tpic_1141_mid_abc12345",
  "asset_type": "paper"
}
```

#### å‰ç«¯æ˜¾ç¤ºéœ€æ±‚
- âœ… åˆ é™¤ç¡®è®¤å¯¹è¯æ¡†

---

## 6. å®Œæ•´å·¥ä½œæµç¨‹

### 6.1 å­¦æœŸåˆå§‹åŒ–æµç¨‹

```mermaid
graph TD
    A[åˆ›å»ºè€ƒè¯•] --> B[è®¾ç½®æƒé‡]
    B --> C[æ‰¹é‡ä¸Šä¼ å­¦ç”Ÿ]
    C --> D[ç­‰å¾…è€ƒè¯•]
```

#### å‰ç«¯æ“ä½œæ­¥éª¤
1. **åˆ›å»ºè€ƒè¯•**
   - ç‚¹å‡»"æ–°å»ºè€ƒè¯•"
   - å¡«å†™è€ƒè¯•ä¿¡æ¯
   - API: `Test_MetadataWriter/create`

2. **è®¾ç½®æƒé‡**
   - è¿›å…¥"æƒé‡é…ç½®"
   - è®¾ç½®å„è€ƒè¯•æƒé‡
   - API: `Test_MetadataWriter/setweight`

3. **æ‰¹é‡ä¸Šä¼ å­¦ç”Ÿ**
   - ä¸‹è½½æ¨¡æ¿
   - å¡«å†™å­¦ç”Ÿä¿¡æ¯
   - ä¸Šä¼  Excel
   - API: `Student_MetadataWriter/upload_excel`

---

### 6.2 è€ƒè¯•å‘å¸ƒæµç¨‹

```mermaid
graph TD
    A[ä¸Šä¼ è€ƒå·] -->|è‡ªåŠ¨| B[çŠ¶æ€: è€ƒå·å®Œæˆ]
    B --> C[å­¦ç”Ÿå¡«å†™æˆç»©]
    C --> D[è®¡ç®—æ€»æˆç»©]
    D -->|è‡ªåŠ¨| E[æ›´æ–°å­¦ç”ŸçŠ¶æ€]
    E --> F[ç”Ÿæˆåˆ†å¸ƒå›¾]
    F -->|è‡ªåŠ¨| G[çŠ¶æ€: è€ƒå·æˆç¸¾çµç®—]
    G --> H[å¯¼å‡ºæŠ¥è¡¨]
```

#### å‰ç«¯æ“ä½œæ­¥éª¤
1. **ä¸Šä¼ è€ƒå·**
   - é€‰æ‹©è€ƒè¯•
   - ä¸Šä¼ å›¾ç‰‡
   - API: `test-filedata/create` (asset_type: paper)
   - ğŸ¤– çŠ¶æ€è‡ªåŠ¨å˜ä¸º `è€ƒå·å®Œæˆ`

2. **å¡«å†™æˆç»©**
   - åœ¨æˆç»©è¡¨æ ¼ä¸­è¾“å…¥åˆ†æ•°
   - API: `Score_MetadataWriter/create` æˆ– `update`

3. **è®¡ç®—æ€»æˆç»©**
   - ç‚¹å‡»"è®¡ç®—æ€»æˆç»©"
   - è®¾ç½®åŠæ ¼åˆ†æ•°
   - API: `Score_MetadataWriter/calculation_final`
   - ğŸ¤– å­¦ç”ŸçŠ¶æ€è‡ªåŠ¨æ›´æ–°

4. **ç”Ÿæˆåˆ†å¸ƒå›¾**
   - ç‚¹å‡»"ç”Ÿæˆåˆ†å¸ƒå›¾"
   - é€‰æ‹©è€ƒè¯•ç±»å‹
   - API: `Score_MetadataWriter/step_diagram`
   - ğŸ¤– è‡ªåŠ¨ä¸Šä¼  + çŠ¶æ€è‡ªåŠ¨å˜ä¸º `è€ƒå·æˆç¸¾çµç®—`

5. **å¯¼å‡ºæŠ¥è¡¨**
   - ç‚¹å‡»"å¯¼å‡ºæŠ¥è¡¨"
   - API: `Student_MetadataWriter/feedback_excel`

---

### 6.3 å­¦ç”ŸçŠ¶æ€æµè½¬

```mermaid
graph TD
    A[åˆ›å»ºå­¦ç”Ÿ] -->|è‡ªåŠ¨| B[ä¿®ä¸šä¸­]
    B -->|è®¡ç®—æ€»æˆç»©| C{åŠæ ¼?}
    C -->|æ˜¯| D[ä¿®ä¸šå®Œæ¯•]
    C -->|å¦| E[è¢«å½“]
    B -->|æ‰‹åŠ¨è®¾ç½®| F[äºŒé€€]
    F -->|è‡ªåŠ¨| G[æ¸…ç©ºæˆç»©]
```

---

## 7. å‰ç«¯é¡µé¢å»ºè®®

### 7.1 é¡µé¢ç»“æ„

```
â”œâ”€â”€ Dashboardï¼ˆä»ªè¡¨æ¿ï¼‰
â”‚   â”œâ”€â”€ ç»Ÿè®¡æ¦‚è§ˆ
â”‚   â””â”€â”€ å¿«é€Ÿæ“ä½œ
â”œâ”€â”€ Studentsï¼ˆå­¦ç”Ÿç®¡ç†ï¼‰
â”‚   â”œâ”€â”€ å­¦ç”Ÿåˆ—è¡¨
â”‚   â”œâ”€â”€ æ‰¹é‡ä¸Šä¼ 
â”‚   â””â”€â”€ å¯¼å‡ºæŠ¥è¡¨
â”œâ”€â”€ Scoresï¼ˆæˆç»©ç®¡ç†ï¼‰
â”‚   â”œâ”€â”€ æˆç»©å½•å…¥
â”‚   â”œâ”€â”€ æˆç»©æŸ¥è¯¢
â”‚   â””â”€â”€ ç»Ÿè®¡åˆ†æ
â”œâ”€â”€ Testsï¼ˆè€ƒè¯•ç®¡ç†ï¼‰
â”‚   â”œâ”€â”€ è€ƒè¯•åˆ—è¡¨
â”‚   â”œâ”€â”€ æƒé‡é…ç½®
â”‚   â””â”€â”€ è€ƒå·ç®¡ç†
â””â”€â”€ Reportsï¼ˆæŠ¥è¡¨ä¸­å¿ƒï¼‰
    â”œâ”€â”€ æˆç»©åˆ†å¸ƒå›¾
    â””â”€â”€ å¯¼å‡ºåŠŸèƒ½
```

---

### 7.2 Dashboardï¼ˆä»ªè¡¨æ¿ï¼‰

#### æ˜¾ç¤ºå†…å®¹
- ğŸ“Š **ç»Ÿè®¡å¡ç‰‡**
  - æ€»å­¦ç”Ÿæ•°
  - æœ¬å­¦æœŸè€ƒè¯•æ•°
  - å¾…å¤„ç†ä»»åŠ¡
  
- ğŸ“ˆ **å¿«é€Ÿæ“ä½œ**
  - æ‰¹é‡ä¸Šä¼ å­¦ç”Ÿ
  - åˆ›å»ºè€ƒè¯•
  - å¯¼å‡ºæŠ¥è¡¨

#### API è°ƒç”¨
- å­¦ç”Ÿæ€»æ•°ï¼š`Student_MetadataWriter/read` (ç©ºå‚æ•°)
- è€ƒè¯•åˆ—è¡¨ï¼š`Test_MetadataWriter/read`

---

### 7.3 Studentsï¼ˆå­¦ç”Ÿç®¡ç†ï¼‰é¡µé¢

#### åŠŸèƒ½ç»„ä»¶
1. **å­¦ç”Ÿåˆ—è¡¨**
   - æ•°æ®è¡¨æ ¼ï¼ˆå¯æ’åºã€åˆ†é¡µï¼‰
   - ç­›é€‰å™¨ï¼šå­¦æœŸã€çŠ¶æ€
   - æ“ä½œæŒ‰é’®ï¼šç¼–è¾‘ã€åˆ é™¤ã€è®¾ç½®çŠ¶æ€

2. **æ‰¹é‡ä¸Šä¼ **
   - ä¸‹è½½æ¨¡æ¿æŒ‰é’®
   - æ–‡ä»¶ä¸Šä¼ ç»„ä»¶
   - ä¸Šä¼ ç»“æœå±•ç¤º

3. **å¯¼å‡ºæŠ¥è¡¨**
   - å­¦æœŸé€‰æ‹©å™¨
   - å¯¼å‡ºæŒ‰é’®

#### é¡µé¢å¸ƒå±€
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å­¦ç”Ÿç®¡ç†                    [+ æ–°å¢å­¦ç”Ÿ] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ç­›é€‰ï¼š[å­¦æœŸâ–¾] [çŠ¶æ€â–¾]  ğŸ” æœç´¢           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€ æ“ä½œæ  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ [ğŸ“¤ æ‰¹é‡ä¸Šä¼ ] [ğŸ“¥ å¯¼å‡ºæŠ¥è¡¨]        â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  å­¦å·      å§“å    å­¦æœŸ   çŠ¶æ€      æ“ä½œ  â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  B110... å¼ ä¸‰   1141   [ä¿®ä¸šä¸­]   [ç¼–è¾‘] â”‚
â”‚  B110... æå››   1141   [ä¿®ä¸šå®Œæ¯•] [ç¼–è¾‘] â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 7.4 Scoresï¼ˆæˆç»©ç®¡ç†ï¼‰é¡µé¢

#### åŠŸèƒ½ç»„ä»¶
1. **æˆç»©å½•å…¥è¡¨æ ¼**
   - å­¦ç”Ÿåˆ—è¡¨
   - å¯ç¼–è¾‘å•å…ƒæ ¼
   - è‡ªåŠ¨ä¿å­˜æˆ–æ‰¹é‡ä¿å­˜

2. **æˆç»©æŸ¥è¯¢**
   - å­¦ç”Ÿæœç´¢
   - æˆç»©æ˜ç»†

3. **ç»Ÿè®¡åˆ†æ**
   - è€ƒè¯•é€‰æ‹©å™¨
   - ç»Ÿè®¡å¡ç‰‡ï¼ˆå¹³å‡åˆ†ã€ä¸­ä½æ•°ï¼‰
   - åˆ†å¸ƒå›¾ç”Ÿæˆ

#### é¡µé¢å¸ƒå±€
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æˆç»©ç®¡ç†            [è®¡ç®—æ€»æˆç»©]          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  å­¦æœŸï¼š[1141â–¾]  è€ƒè¯•ï¼š[æœŸä¸­è€ƒâ–¾]           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  å­¦å·     å§“å  å°è€ƒ1  æœŸä¸­  å°è€ƒ2  æœŸæœ«  æ€»åˆ†â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚  B110... å¼ ä¸‰   85    90    88    92   89.2â”‚
â”‚  B110... æå››   78    82    -     -     -  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ç»Ÿè®¡ä¿¡æ¯                                  â”‚
â”‚  â”Œâ”€ å¹³å‡åˆ† â”€â”€â” â”Œâ”€ ä¸­ä½æ•° â”€â”€â”             â”‚
â”‚  â”‚   85.5   â”‚ â”‚   87.0   â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚  [ç”Ÿæˆåˆ†å¸ƒå›¾]                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 7.5 Testsï¼ˆè€ƒè¯•ç®¡ç†ï¼‰é¡µé¢

#### åŠŸèƒ½ç»„ä»¶
1. **è€ƒè¯•åˆ—è¡¨**
   - è€ƒè¯•å¡ç‰‡
   - çŠ¶æ€æ˜¾ç¤º
   - æ“ä½œæŒ‰é’®

2. **æƒé‡é…ç½®**
   - æƒé‡è®¾ç½®è¡¨å•
   - ç™¾åˆ†æ¯”æ˜¾ç¤º
   - æ€»å’ŒéªŒè¯

3. **è€ƒå·ç®¡ç†**
   - ä¸Šä¼ è€ƒå·
   - æŸ¥çœ‹/ä¸‹è½½
   - ç›´æ–¹å›¾ç®¡ç†

#### é¡µé¢å¸ƒå±€
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  è€ƒè¯•ç®¡ç†                    [+ æ–°å»ºè€ƒè¯•] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  å­¦æœŸï¼š[1141â–¾]                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€ æœŸä¸­è€ƒ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚ æ—¥æœŸï¼š114/12/28              â”‚       â”‚
â”‚  â”‚ èŒƒå›´ï¼š1-1~2-6                â”‚       â”‚
â”‚  â”‚ çŠ¶æ€ï¼š[è€ƒå·å®Œæˆ]             â”‚       â”‚
â”‚  â”‚ æƒé‡ï¼š30%                    â”‚       â”‚
â”‚  â”‚ [ä¸Šä¼ è€ƒå·] [æŸ¥çœ‹è€ƒå·] [ç¼–è¾‘] â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚  â”Œâ”€ æœŸæœ«è€ƒ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚ ...                          â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 7.6 çŠ¶æ€å¾½ç« æ ·å¼å»ºè®®

```css
/* å­¦ç”ŸçŠ¶æ€ */
.badge-active { background: #3b82f6; }      /* ä¿®ä¸šä¸­ - è“è‰² */
.badge-completed { background: #10b981; }   /* ä¿®ä¸šå®Œæ¯• - ç»¿è‰² */
.badge-failed { background: #ef4444; }      /* è¢«å½“ - çº¢è‰² */
.badge-withdrew { background: #6b7280; }    /* äºŒé€€ - ç°è‰² */

/* è€ƒè¯•çŠ¶æ€ */
.badge-pending { background: #9ca3af; }     /* å°šæœªå‡ºè€ƒå· - ç°è‰² */
.badge-ready { background: #3b82f6; }       /* è€ƒå·å®Œæˆ - è“è‰² */
.badge-finished { background: #10b981; }    /* è€ƒå·æˆç¸¾çµç®— - ç»¿è‰² */
```

---

## 8. å‰ç«¯å¼€å‘æ³¨æ„äº‹é¡¹

### 8.1 API è°ƒç”¨çº¦å®š

#### ç»Ÿä¸€é”™è¯¯å¤„ç†
```javascript
async function callAPI(url, data) {
  try {
    const response = await fetch(url, {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
      },
      body: JSON.stringify(data)
    });
    
    const result = await response.json();
    
    if (response.ok) {
      return { success: true, data: result.data };
    } else {
      return { success: false, error: result.detail };
    }
  } catch (error) {
    return { success: false, error: error.message };
  }
}
```

#### æ–‡ä»¶ä¸Šä¼ 
```javascript
async function uploadFile(url, formData) {
  try {
    const response = await fetch(url, {
      method: 'POST',
      body: formData  // ä¸è¦è®¾ç½® Content-Type
    });
    
    if (response.headers.get('content-type')?.includes('application/json')) {
      return await response.json();
    } else {
      // å›¾ç‰‡æˆ– Excel æ–‡ä»¶
      return await response.blob();
    }
  } catch (error) {
    console.error('Upload failed:', error);
  }
}
```

---

### 8.2 è‡ªåŠ¨åŒ–æµç¨‹æç¤º

#### çŠ¶æ€è‡ªåŠ¨æ›´æ–°
ä»¥ä¸‹æ“ä½œä¼šè‡ªåŠ¨æ›´æ–°çŠ¶æ€ï¼Œå‰ç«¯åº”åœ¨æ“ä½œååˆ·æ–°æ•°æ®ï¼š

1. **ä¸Šä¼ è€ƒå·** â†’ è€ƒè¯•çŠ¶æ€è‡ªåŠ¨å˜ä¸º `è€ƒå·å®Œæˆ`
2. **ç”Ÿæˆåˆ†å¸ƒå›¾** â†’ è€ƒè¯•çŠ¶æ€è‡ªåŠ¨å˜ä¸º `è€ƒå·æˆç¸¾çµç®—`
3. **è®¡ç®—æ€»æˆç»©** â†’ å­¦ç”ŸçŠ¶æ€è‡ªåŠ¨å˜ä¸º `ä¿®ä¸šå®Œæ¯•`/`è¢«å½“`
4. **è®¾ç½®äºŒé€€** â†’ æˆç»©è‡ªåŠ¨æ¸…ç©º

#### å‰ç«¯åˆ·æ–°ç­–ç•¥
```javascript
// æ“ä½œå®Œæˆååˆ·æ–°
async function uploadPaper(testId, file) {
  const result = await uploadFile(uploadUrl, formData);
  
  if (result.success) {
    // æ˜¾ç¤ºæ–°çŠ¶æ€
    updateTestStatus(result.data.test_states);
    
    // å¯é€‰ï¼šæ˜¾ç¤ºæç¤º
    showToast(`è€ƒå·ä¸Šä¼ æˆåŠŸï¼ŒçŠ¶æ€å·²æ›´æ–°ä¸º ${result.data.test_states}`);
  }
}
```

---

### 8.3 æ•°æ®éªŒè¯

#### å‰ç«¯éªŒè¯è§„åˆ™
```javascript
const validationRules = {
  // å­¦å·æ ¼å¼
  student_number: /^[A-Z]\d{8}$/,
  
  // å­¦æœŸæ ¼å¼
  semester: /^\d{4}$/,
  
  // æˆç»©èŒƒå›´
  score: (value) => value >= 0 && value <= 100,
  
  // æƒé‡æ€»å’Œ
  weights: (weights) => {
    const sum = Object.values(weights).reduce((a, b) => a + b, 0);
    return Math.abs(sum - 1.0) < 0.001;
  }
};
```

---

### 8.4 æ€§èƒ½ä¼˜åŒ–å»ºè®®

1. **åˆ†é¡µåŠ è½½**
   - å­¦ç”Ÿåˆ—è¡¨ä½¿ç”¨åˆ†é¡µï¼ˆæ¯é¡µ 50 æ¡ï¼‰
   - è€ƒè¯•åˆ—è¡¨æŒ‰å­¦æœŸç­›é€‰

2. **é˜²æŠ–å¤„ç†**
   - æˆç»©è¾“å…¥ä½¿ç”¨é˜²æŠ–ï¼ˆ500msï¼‰
   - æœç´¢æ¡†ä½¿ç”¨é˜²æŠ–ï¼ˆ300msï¼‰

3. **æ‰¹é‡æ“ä½œ**
   - æˆç»©å½•å…¥æ”¯æŒæ‰¹é‡ä¿å­˜
   - é¿å…é€æ¡æ›´æ–°

---

## 9. æµ‹è¯•å»ºè®®

### 9.1 åŠŸèƒ½æµ‹è¯•æ¸…å•

#### å­¦ç”Ÿç®¡ç†
- [ ] åˆ›å»ºå•ä¸ªå­¦ç”Ÿ
- [ ] æ‰¹é‡ä¸Šä¼ å­¦ç”Ÿï¼ˆæ­£å¸¸æ–‡ä»¶ï¼‰
- [ ] æ‰¹é‡ä¸Šä¼ å­¦ç”Ÿï¼ˆé”™è¯¯æ–‡ä»¶ï¼‰
- [ ] æŸ¥è¯¢å­¦ç”Ÿåˆ—è¡¨
- [ ] æ›´æ–°å­¦ç”Ÿä¿¡æ¯
- [ ] åˆ é™¤å­¦ç”Ÿï¼ˆéªŒè¯çº§è”åˆ é™¤ï¼‰
- [ ] è®¾ç½®å­¦ç”ŸçŠ¶æ€
- [ ] å¯¼å‡ºå­¦ç”ŸæŠ¥è¡¨

#### æˆç»©ç®¡ç†
- [ ] å½•å…¥æˆç»©
- [ ] æ›´æ–°æˆç»©
- [ ] æŸ¥è¯¢æˆç»©
- [ ] è®¡ç®—æ€»æˆç»©
- [ ] æŸ¥çœ‹ç»Ÿè®¡ä¿¡æ¯
- [ ] ç”Ÿæˆåˆ†å¸ƒå›¾

#### è€ƒè¯•ç®¡ç†
- [ ] åˆ›å»ºè€ƒè¯•
- [ ] æŸ¥è¯¢è€ƒè¯•
- [ ] è®¾ç½®æƒé‡
- [ ] ä¸Šä¼ è€ƒå·
- [ ] æŸ¥çœ‹è€ƒå·
- [ ] åˆ é™¤è€ƒå·

---

### 9.2 è‡ªåŠ¨åŒ–æµ‹è¯•åœºæ™¯

#### åœºæ™¯1ï¼šå®Œæ•´å­¦æœŸæµç¨‹
```javascript
test('Complete semester workflow', async () => {
  // 1. åˆ›å»ºè€ƒè¯•
  const test = await createTest({...});
  expect(test.test_states).toBe('å°šæœªå‡ºè€ƒå·');
  
  // 2. ä¸Šä¼ è€ƒå·
  const uploadResult = await uploadPaper(test.test_uuid, file);
  expect(uploadResult.test_states).toBe('è€ƒå·å®Œæˆ'); // âœ… è‡ªåŠ¨æ›´æ–°
  
  // 3. æ‰¹é‡ä¸Šä¼ å­¦ç”Ÿ
  const students = await uploadStudents(excelFile);
  expect(students.created_count).toBeGreaterThan(0);
  
  // 4. å½•å…¥æˆç»©
  await updateScore(...);
  
  // 5. è®¡ç®—æ€»æˆç»©
  await calculateFinalScores(...);
  
  // 6. éªŒè¯å­¦ç”ŸçŠ¶æ€å·²æ›´æ–°
  const student = await getStudent(studentId);
  expect(student.student_status).toMatch(/ä¿®ä¸šå®Œæ¯•|è¢«å½“/); // âœ… è‡ªåŠ¨æ›´æ–°
  
  // 7. ç”Ÿæˆåˆ†å¸ƒå›¾
  await generateDiagram(...);
  
  // 8. éªŒè¯è€ƒè¯•çŠ¶æ€å·²æ›´æ–°
  const updatedTest = await getTest(test.test_uuid);
  expect(updatedTest.test_states).toBe('è€ƒå·æˆç¸¾çµç®—'); // âœ… è‡ªåŠ¨æ›´æ–°
});
```

---

## 10. é™„å½•

### 10.1 å®Œæ•´ API åˆ—è¡¨

| æ¨¡å— | API | URL | æ–¹æ³• |
|------|-----|-----|------|
| å­¦ç”Ÿ | åˆ›å»ºå­¦ç”Ÿ | `/Student_MetadataWriter/create` | POST |
| å­¦ç”Ÿ | æ‰¹é‡ä¸Šä¼  | `/Student_MetadataWriter/upload_excel` | POST |
| å­¦ç”Ÿ | æŸ¥è¯¢å­¦ç”Ÿ | `/Student_MetadataWriter/read` | POST |
| å­¦ç”Ÿ | æ›´æ–°å­¦ç”Ÿ | `/Student_MetadataWriter/update` | POST |
| å­¦ç”Ÿ | åˆ é™¤å­¦ç”Ÿ | `/Student_MetadataWriter/delete` | POST |
| å­¦ç”Ÿ | æ›´æ–°çŠ¶æ€ | `/Student_MetadataWriter/status` | POST |
| å­¦ç”Ÿ | å¯¼å‡ºæŠ¥è¡¨ | `/Student_MetadataWriter/feedback_excel` | POST |
| æˆç»© | åˆ›å»ºæˆç»© | `/Score_MetadataWriter/create` | POST |
| æˆç»© | æ›´æ–°æˆç»© | `/Score_MetadataWriter/update` | POST |
| æˆç»© | æŸ¥è¯¢æˆç»© | `/Score_MetadataWriter/read` | POST |
| æˆç»© | åˆ é™¤æˆç»© | `/Score_MetadataWriter/delete` | POST |
| æˆç»© | è®¡ç®—æ€»åˆ† | `/Score_MetadataWriter/calculation_final` | POST |
| æˆç»© | è€ƒè¯•ç»Ÿè®¡ | `/Score_MetadataWriter/test_score` | POST |
| æˆç»© | åˆ†å¸ƒå›¾ | `/Score_MetadataWriter/step_diagram` | POST |
| è€ƒè¯• | åˆ›å»ºè€ƒè¯• | `/Test_MetadataWriter/create` | POST |
| è€ƒè¯• | æŸ¥è¯¢è€ƒè¯• | `/Test_MetadataWriter/read` | POST |
| è€ƒè¯• | æ›´æ–°è€ƒè¯• | `/Test_MetadataWriter/update` | POST |
| è€ƒè¯• | åˆ é™¤è€ƒè¯• | `/Test_MetadataWriter/delete` | POST |
| è€ƒè¯• | æ›´æ–°çŠ¶æ€ | `/Test_MetadataWriter/status` | POST |
| è€ƒè¯• | è®¾ç½®æƒé‡ | `/Test_MetadataWriter/setweight` | POST |
| æ–‡ä»¶ | ä¸Šä¼ æ–‡ä»¶ | `/test-filedata/create` | POST |
| æ–‡ä»¶ | æŸ¥çœ‹æ–‡ä»¶ | `/test-filedata/read` | POST |
| æ–‡ä»¶ | æ›´æ–°æ–‡ä»¶ | `/test-filedata/update` | POST |
| æ–‡ä»¶ | åˆ é™¤æ–‡ä»¶ | `/test-filedata/delete` | POST |

---

### 10.2 çŠ¶æ€ç è¯´æ˜

| çŠ¶æ€ç  | è¯´æ˜ | å¤„ç†æ–¹å¼ |
|--------|------|----------|
| 200 | æˆåŠŸ | æ˜¾ç¤ºæ•°æ® |
| 201 | åˆ›å»ºæˆåŠŸ | æ˜¾ç¤ºæ¶ˆæ¯å¹¶åˆ·æ–° |
| 400 | è¯·æ±‚é”™è¯¯ | æ˜¾ç¤ºé”™è¯¯æç¤º |
| 404 | æœªæ‰¾åˆ° | æ˜¾ç¤º"æœªæ‰¾åˆ°"æç¤º |
| 500 | æœåŠ¡å™¨é”™è¯¯ | æ˜¾ç¤ºé”™è¯¯å¹¶è”ç³»ç®¡ç†å‘˜ |

---

### 10.3 å¸¸ç”¨å¸¸é‡

```javascript
// å­¦ç”ŸçŠ¶æ€
const STUDENT_STATUS = {
  ACTIVE: 'ä¿®ä¸šä¸­',
  COMPLETED: 'ä¿®ä¸šå®Œæ¯•',
  FAILED: 'è¢«å½“',
  WITHDREW: 'äºŒé€€'
};

// è€ƒè¯•çŠ¶æ€
const TEST_STATUS = {
  PENDING: 'å°šæœªå‡ºè€ƒå·',
  READY: 'è€ƒå·å®Œæˆ',
  FINISHED: 'è€ƒå·æˆç¸¾çµç®—'
};

// æˆç»©å­—æ®µ
const SCORE_FIELDS = {
  QUIZ1: 'score_quiz1',
  MIDTERM: 'score_midterm',
  QUIZ2: 'score_quiz2',
  FINAL: 'score_finalexam',
  TOTAL: 'score_total'
};

// æ–‡ä»¶ç±»å‹
const ASSET_TYPES = {
  PAPER: 'paper',
  TEST_PIC: 'test_pic',
  HISTOGRAM: 'histogram',
  TEST_PIC_HISTOGRAM: 'test_pic_histogram'
};
```

---

## æ€»ç»“

æœ¬æ–‡æ¡£æä¾›äº†å®Œæ•´çš„å‰ç«¯å¼€å‘æŒ‡å—ï¼ŒåŒ…æ‹¬ï¼š

âœ… **æ‰€æœ‰ API çš„è¯¦ç»†è§„æ ¼**ï¼ˆURLã€å‚æ•°ã€å“åº”ï¼‰  
âœ… **å‰ç«¯ç»„ä»¶éœ€æ±‚**ï¼ˆè¾“å…¥æ¡†ã€ä¸‹æ‹‰é€‰æ‹©ã€æ–‡ä»¶ä¸Šä¼ ç­‰ï¼‰  
âœ… **æ˜¾ç¤ºéœ€æ±‚**ï¼ˆçŠ¶æ€å¾½ç« ã€è¡¨æ ¼ã€å›¾è¡¨ç­‰ï¼‰  
âœ… **è‡ªåŠ¨åŒ–æµç¨‹è¯´æ˜**ï¼ˆçŠ¶æ€è‡ªåŠ¨æ›´æ–°ï¼‰  
âœ… **å®Œæ•´å·¥ä½œæµç¨‹**ï¼ˆä»åˆ›å»ºåˆ°å¯¼å‡ºï¼‰  
âœ… **é¡µé¢å¸ƒå±€å»ºè®®**ï¼ˆDashboardã€å„æ¨¡å—é¡µé¢ï¼‰  
âœ… **ä»£ç ç¤ºä¾‹**ï¼ˆAPI è°ƒç”¨ã€éªŒè¯ã€é”™è¯¯å¤„ç†ï¼‰  

**ä½¿ç”¨å»ºè®®**ï¼š
1. æŒ‰æ¨¡å—é€æ­¥å®ç°åŠŸèƒ½
2. ä¼˜å…ˆå®ç°æ ¸å¿ƒæµç¨‹ï¼ˆå­¦ç”Ÿâ†’æˆç»©â†’è€ƒè¯•ï¼‰
3. å……åˆ†åˆ©ç”¨è‡ªåŠ¨åŒ–ç‰¹æ€§å‡å°‘ç”¨æˆ·æ“ä½œ
4. æ³¨æ„çŠ¶æ€æ˜¾ç¤ºå’Œç”¨æˆ·åé¦ˆ

ç¥å¼€å‘é¡ºåˆ©ï¼ğŸš€
